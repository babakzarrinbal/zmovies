(function(t){function e(e){for(var a,i,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)i=o[u],r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/zmovies/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"07d1":function(t,e,s){"use strict";var a=s("ab4a"),r=s.n(a);r.a},"07de":function(t,e,s){},5571:function(t,e,s){"use strict";var a=s("adca"),r=s.n(a);r.a},"56d7":function(t,e,s){"use strict";s.r(e);var a;s("cadf"),s("551c"),s("f751"),s("097d");a={socket:{url:"https://diliviri.com/",namespace:"superadmin"}};var r=a,n=(s("ab8b"),s("87b8"),s("9180"),s("2b0e")),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"opacity"}},[t.userresolved?s("div",{staticStyle:{widht:"100vw",height:"100%"},attrs:{id:"app"}},[s("div",{attrs:{id:"mainloader"}}),t.$root.user?s("div",{staticStyle:{position:"relative",height:"100%"}},[s("div",{attrs:{id:"header"}},[s("div",{staticClass:"float-right",staticStyle:{float:"right",height:"30px",width:"30px",padding:"4px"},on:{click:function(e){t.settingvis=!0}}},[s("img",{staticStyle:{height:"calc(100% - 6px)",padding:"0 3px"},attrs:{src:"img/icons/menu.png",alt:""}})]),s("div",{staticClass:"clearfix"})]),s("transition",{attrs:{name:"slideleft"}},[t.settingvis?s("settings",{on:{hide:function(e){t.settingvis=0}}}):t._e()],1),s("transition",{attrs:{name:"component-"+t.transisionname}},[s("keep-alive",[t.$route.meta.keepAlive?s("router-view",{staticClass:"container mainrouteview",attrs:{id:"pagecontainer"}}):t._e()],1)],1),s("div",{staticClass:"d-flex justify-content-around",attrs:{id:"nav"}},[s("a",{class:{"router-link-exact-active router-link-active":1==t.$route.meta.mainindex},on:{click:function(e){return t.nav(e,"/")}}},[s("img",{attrs:{src:"img/icon/list.png",alt:""}})]),s("a",{class:{"router-link-exact-active router-link-active":2==t.$route.meta.mainindex},on:{click:function(e){return t.nav(e,"/drivers")}}},[t._v("Drivers")]),s("a",{class:{"router-link-exact-active router-link-active":3==t.$route.meta.mainindex},on:{click:function(e){return t.nav(e,"/merchants")}}},[t._v("Merchants")])])],1):s("login")],1):t._e()])},o=[],l=s("cebc"),c=(s("a481"),s("96cf"),s("3b8d")),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-center align-items-center flex-column",attrs:{id:"loginview"}},[t.loginerror?s("div",{staticClass:"alert alert-danger alert-dismissible fade show"},[s("strong",[t._v("error!")]),t._v(" wrong username or password !\n  ")]):t._e(),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"float-left",attrs:{for:"usr"}},[t._v("Email:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],staticClass:"form-control",attrs:{type:"email",id:"usr",placeholder:"Email"},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}})]),s("div",{staticClass:"form-group",staticStyle:{position:"relative"}},[s("label",{staticClass:"float-left",attrs:{for:"pass"}},[t._v("Password:")]),"checkbox"===(t.showpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{id:"pass",placeholder:"Password",type:"checkbox"},domProps:{checked:Array.isArray(t.credentials.password)?t._i(t.credentials.password,null)>-1:t.credentials.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginrequest()},change:function(e){var s=t.credentials.password,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=t._i(s,n);a.checked?i<0&&t.$set(t.credentials,"password",s.concat([n])):i>-1&&t.$set(t.credentials,"password",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.credentials,"password",r)}}}):"radio"===(t.showpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{id:"pass",placeholder:"Password",type:"radio"},domProps:{checked:t._q(t.credentials.password,null)},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginrequest()},change:function(e){return t.$set(t.credentials,"password",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{id:"pass",placeholder:"Password",type:t.showpass?"text":"password"},domProps:{value:t.credentials.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginrequest()},input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),t.credentials.password?s("img",{staticClass:"seeimg",staticStyle:{position:"absolute",right:"6px",top:"41px",height:"20px",width:"20px"},attrs:{src:"/img/icon/"+(t.showpass?"not":"")+"see.png"},on:{click:function(e){t.showpass=!t.showpass}}}):t._e()]),s("div",{staticClass:"form-group btn btn-success",staticStyle:{width:"100%",position:"relative"},on:{click:function(e){return t.loginrequest()}}},[t._v("\n      Login\n      "),t.loading?s("img",{staticClass:"loader",attrs:{src:"img/rings.svg"}}):t._e()])])])},u=[],p={data:function(){return{loginerror:!1,showpass:!1,credentials:{email:null,password:null},loading:!1}},methods:{loginrequest:function(){var t=this;t.loginerror=!1,t.loading=!0,t.socketcall("users/login",t.credentials).then(function(e){if(e.error||!e.data)return t.loading=!1,t.loginerror=!0,window.localStorage.setItem("api_token",null);window.localStorage.setItem("api_token",e.data.message),t.socketreconnect()})}}},m=p,v=(s("5571"),s("2877")),f=Object(v["a"])(m,d,u,!1,null,null,null),h=f.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settings"},on:{click:function(e){return t.hideme()}}},[s("div",{staticClass:"window",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"btn btn-danger",staticStyle:{width:"calc(100% - 10px)"},on:{click:function(e){return t.logout()}}},[t._v("logout")]),s("div",{staticClass:"btn btn-warning mt-2",staticStyle:{width:"calc(100% - 10px)"},on:{click:function(e){return t.updateapp()}}},[t._v("Update/reset")]),s("div",{staticClass:"btn btn-info mt-2",staticStyle:{width:"calc(100% - 10px)"},on:{click:function(e){t.showpassform=!t.showpassform}}},[t._v("change password")]),t.showpassform?s("div",{staticClass:"my-2 mx-auto",staticStyle:{width:"calc(100% - 10px)"}},[s("div",{staticClass:"form-group",staticStyle:{position:"relative"}},["checkbox"===(t.showoldpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpass,expression:"oldpass"}],staticClass:"form-control",attrs:{placeholder:"Old Password",type:"checkbox"},domProps:{checked:Array.isArray(t.oldpass)?t._i(t.oldpass,null)>-1:t.oldpass},on:{change:function(e){var s=t.oldpass,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=t._i(s,n);a.checked?i<0&&(t.oldpass=s.concat([n])):i>-1&&(t.oldpass=s.slice(0,i).concat(s.slice(i+1)))}else t.oldpass=r}}}):"radio"===(t.showoldpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpass,expression:"oldpass"}],staticClass:"form-control",attrs:{placeholder:"Old Password",type:"radio"},domProps:{checked:t._q(t.oldpass,null)},on:{change:function(e){t.oldpass=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpass,expression:"oldpass"}],staticClass:"form-control",attrs:{placeholder:"Old Password",type:t.showoldpass?"text":"password"},domProps:{value:t.oldpass},on:{input:function(e){e.target.composing||(t.oldpass=e.target.value)}}}),s("img",{staticClass:"seeimg",staticStyle:{position:"absolute",right:"2px",top:"4px"},attrs:{src:"/img/icon/"+(t.showoldpass?"not":"")+"see.png"},on:{click:function(e){t.showoldpass=!t.showoldpass}}})]),s("div",{staticClass:"form-group",staticStyle:{position:"relative"}},["checkbox"===(t.shownewpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.newpass,expression:"newpass"}],staticClass:"form-control",attrs:{placeholder:"New Password",type:"checkbox"},domProps:{checked:Array.isArray(t.newpass)?t._i(t.newpass,null)>-1:t.newpass},on:{change:function(e){var s=t.newpass,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=t._i(s,n);a.checked?i<0&&(t.newpass=s.concat([n])):i>-1&&(t.newpass=s.slice(0,i).concat(s.slice(i+1)))}else t.newpass=r}}}):"radio"===(t.shownewpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.newpass,expression:"newpass"}],staticClass:"form-control",attrs:{placeholder:"New Password",type:"radio"},domProps:{checked:t._q(t.newpass,null)},on:{change:function(e){t.newpass=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.newpass,expression:"newpass"}],staticClass:"form-control",attrs:{placeholder:"New Password",type:t.shownewpass?"text":"password"},domProps:{value:t.newpass},on:{input:function(e){e.target.composing||(t.newpass=e.target.value)}}}),s("img",{staticClass:"seeimg",staticStyle:{position:"absolute",right:"2px",top:"4px"},attrs:{src:"/img/icon/"+(t.shownewpass?"not":"")+"see.png"},on:{click:function(e){t.shownewpass=!t.shownewpass}}})]),s("div",{staticClass:"btn btn-success mt-2",staticStyle:{width:"calc(100% - 30px)"},on:{click:function(e){return t.savepassword()}}},[t._v("\n        save\n        "),t.savingpassword?s("img",{staticClass:"loader",staticStyle:{margin:"-15px 0"},attrs:{src:"img/rings.svg"}}):t._e()])]):t._e()])])},_=[],g={name:"settings",data:function(){return{showpassform:!1,shownewpass:!1,showoldpass:!1,savingpassword:!1,oldpass:null,newpass:null}},created:function(){},methods:{hideme:function(){this.$emit("hide")},logout:function(){window.localStorage.setItem("api_token",null),this.$root.user=null,this.socketreconnect(),this.hideme()},updateapp:function(){window.location.reload(!0)},savepassword:function(){var t=this;if(!t.savingpassword){if(!t.newpass)return window.toastr.warning("new password is not filled");t.savingpassword=!0,t.socketcall("users/changepass",{newpass:t.newpass,oldpass:t.oldpass}).then(function(e){if(t.savingpassword=!1,e.error)return window.toastr.error((e.error||{}).message||"couldn't save new password");window.toastr.success("password changed!"),t.oldpass=null,t.newpass=null,t.showpassform=!1})}}},computed:{}},y=g,b=(s("07d1"),Object(v["a"])(y,w,_,!1,null,"6d4afb1c",null)),x=b.exports,k={data:function(){return{userresolved:!1,settingvis:!1,transisionname:"slideleft"}},components:{login:h,settings:x},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.getuser();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getuser:function(){var t=this;t.$root.user={},t.userresolved=!0;var e=document.getElementById("preloader");if(e){console.log();var s=function(){e&&e.parentNode.removeChild(e),e=null};e.addEventListener("transitionend",s),document.getElementById("preloader").style.opacity=0}},nav:function(t,e){var s=this.$route.meta.mainindex,a=this.$router.resolve(e).route.meta.mainindex;s!==a&&(this.transisionname=s>a?"slideright":"slideleft",this.$router.push(e))},queryhandeler:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s="string"==e.type?JSON.parse(e.data):e,s){t.next=3;break}return t.abrupt("return");case 3:a=this.$router,a.replace(Object(l["a"])({},a.currentRoute,{query:null}));case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},watch:{},computed:{}},C=k,j=(s("5c0b"),Object(v["a"])(C,i,o,!1,null,null,null)),O=j.exports,M=s("8c4f"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home container"},[s("div",{staticClass:"movielistcontainer"},t._l(t.movies,function(e){return s("div",{key:e._id,staticClass:"d-flex movie"},[s("div",{staticClass:"imgcontainer"},[s("img",{attrs:{src:e.img,alt:""}})]),s("div",{staticClass:"description"},[s("div",{staticClass:"header"},[s("span",[t._v(t._s(e.year))]),e.toyear?s("span",[t._v("- "+t._s(e.toyear))]):t._e(),s("span",[t._v(t._s(e.title))])]),s("div",{staticClass:"body"},[s("span",[t._v("country: "+t._s(e.countries.join(", ")))]),s("a",{attrs:{href:"https://imdb.com/title/"+e.imdbid,target:"_blank"}},[t._v("more")])])])])}),0)])},S=[],$={name:"Dashboard",data:function(){return{movies:[],imdbid:"",window:window}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.fetch("db/movies/list/lastupdated/1.json",{cache:"no-store"}).then(function(t){return t.json()});case 2:this.movies=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},beforeDestroy:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),methods:{},computed:{}},D=$,z=(s("e992"),Object(v["a"])(D,P,S,!1,null,"66ce9dd2",null)),N=z.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",[s("br"),t.restaurants.length?t._e():s("div",{staticClass:"alert alert-warning"},[t._v("No Record for this Time Period")]),t._l(t.restaurants,function(e){return s("div",{key:e.driver_id,staticClass:"list-group mb-3"},[s("div",{staticClass:"d-flex flex-column bz-card bg-light",on:{click:function(s){t.detailshow_id=t.detailshow_id==e.restaurant_id?null:e.restaurant_id,s.target.scrollIntoView(!0)}}},[s("div",{staticClass:"p-2"},[s("div",{staticClass:"d-flex text-left flex-wrap justify-content-between"},[s("div",{staticClass:"m-1"},[s("strong",[t._v(t._s(e.name))])]),s("div",{staticClass:"m-1",on:{click:function(t){t.stopPropagation()}}},[s("a",{attrs:{href:"tel:"+e.phone}},[t._v("Call")])])]),s("div",{staticClass:"d-flex small text-left flex-wrap justify-content-between"},[s("div",{staticClass:"m-1"},[s("strong",[t._v("Orders Milage (km):")]),t._v("\n              "+t._s(e.total_milage)+"\n            ")]),s("div",{staticClass:"m-1"},[s("strong",[t._v("Income (£):")]),t._v("\n              "+t._s(e.total_cost)+"\n            ")]),s("div",{staticClass:"m-1"},[s("strong",[t._v("Orders:")]),t._v("\n              "+t._s(e.total_orders)+"\n            ")])])]),t.detailshow_id==e.restaurant_id?s("div",{staticClass:"mt-2",staticStyle:{background:"#ffef96"}},t._l(e.orders,function(e,a){return s("div",{key:a,staticClass:"border-bottom p-2 border-danger small"},[s("div",{staticClass:"d-flex flex-wrap justify-content-between text-left"},[s("div",{staticClass:"m-1"},[t._v("\n                Income (£):\n                "+t._s(e.total)+"\n              ")]),s("div",{staticClass:"m-1"},[t._v("\n                Order id:\n                "+t._s(e.order_id)+"\n              ")]),s("div",{staticClass:"m-1"},[t._v("\n                Milage (km):\n                "+t._s(e.milage)+"\n              ")])])])}),0):t._e()])])})],2)])},R=[],T=s("a4bb"),q=s.n(T),E=s("5d73"),H=s.n(E),I=(s("55dd"),s("7514"),{name:"Merchants",data:function(){return{detailshow_id:null}},beforeDestroy:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),methods:{},computed:{restaurants:function(){var t=((this.$root.mainData||{}).orders||[]).slice();return t.reduce(function(t,e){var s=t.find(function(t){return t._id==(e.restaurant_id||{})._id||null});s||(s={_id:(e.restaurant_id||{})._id||null,restaurant_id:(e.restaurant_id||{})._id||"ptp",name:e.restaurant_id?e.restaurant_id.restaurantname:"Point To Point",phone:e.restaurant_id?"tel:"+(e.restaurant_id.phone||{}).code+(e.restaurant_id.phone||{}).number:"",total_cost:0,total_milage:0,total_orders:0,orders:[]},t.push(s));var a={total:e.billings.amount.total||0,order_id:e.order_id,milage:Math.bzround((e.delivery_milage||{}).total||0,2)};return s.orders.push(a),s.total_cost+=a.total,s.total_cost=Math.bzround(s.total_cost,2),s.total_milage+=a.milage,s.total_milage=Math.bzround(s.total_milage,2),s.total_orders+=1,t},[])},finalData:function(){var t=[],e=((this.$root.mainData||{}).drivers||[]).slice(),s=((this.$root.mainData||{}).orders||[]).slice(),a=((this.$root.mainData||{}).shifts||[]).slice();if(!s&&!e&&!a)return t;var r={},n=!0,i=!1,o=void 0;try{for(var l,c=H()(s);!(n=(l=c.next()).done);n=!0){var d=l.value;d.restaurant_id||r.ptp.push(d),r[d.restaurant_id._id]?r[d.restaurant_id._id].push(d):(r[d.restaurant_id._id]=[],r[d.restaurant_id._id].push(d))}}catch(C){i=!0,o=C}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}for(var u=q()(r),p=0;p<u.length;p++){var m=u[p],v={},f=0,h=0;v.restaurant_id=m,v.total_orders=r[m].length,v.orders=[];var w=!0,_=!1,g=void 0;try{for(var y,b=H()(r[m]);!(w=(y=b.next()).done);w=!0){var x=y.value,k={};f+=x.billings.amount.total||0,v.name=x.restaurant_id.restaurantname||"",v.phone="tel:"+(x.restaurant_id.phone||{}).code+(x.restaurant_id.phone||{}).number,k.total=x.billings.amount.total||0,k.order_id=x.order_id,k.milage=((x.delivery_milage||{}).deliver||0).toFixed(2),h+=(x.delivery_milage||{}).deliver||0,v.orders.push(k)}}catch(C){_=!0,g=C}finally{try{w||null==b.return||b.return()}finally{if(_)throw g}}v.total_cost=Math.bzround(f.toFixed(2),2),v.total_milage=h.toFixed(2),t.push(v)}return console.log(t),t.sort(function(t,e){return t.total_orders>e.total_orders?-1:1})}}}),L=I,F=Object(v["a"])(L,A,R,!1,null,null,null),U=F.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",[s("br"),t.drivers.length?t._e():s("div",{staticClass:"alert alert-warning"},[t._v("No Record for this Time Period")]),t._l(t.drivers,function(e){return s("div",{key:e._id,staticClass:"list-group mb-3"},[s("div",{staticClass:"d-flex flex-column bz-card bg-light",on:{click:function(s){t.tmp_id=t.tmp_id==e._id?null:e._id,s.target.scrollIntoView(!0)}}},[s("div",{staticClass:"p-4"},[s("div",{staticClass:"d-flex flex-wrap mb-3 pb-2 text-left justify-content-between",staticStyle:{"border-bottom":"1px solid gray"}},[s("div",{},[s("strong",[t._v(t._s(e.name))])]),s("div",{on:{click:function(t){t.stopPropagation()}}},[s("a",{attrs:{href:"tel:"+e.phone}},[t._v("Call")])])]),s("div",{staticClass:"d-flex small flex-wrap justify-content-between text-left"},[s("div",{},[s("strong",[t._v("Total Hours:")]),t._v("\n              "+t._s(e.total_hours)+"\n            ")]),s("div",{},[s("strong",[t._v("Total Milage (km):")]),t._v("\n              "+t._s(e.milage_traveled)+"\n            ")]),s("div",{},[s("strong",[t._v("Cost Per Drop (£):")]),t._v("\n              "+t._s(e.cost_per_drop)+"\n            ")]),s("div",{},[s("strong",[t._v("Total Cost (£):")]),t._v("\n              "+t._s(e.total_cost)+"\n            ")]),s("div",{},[s("strong",[t._v("Total Orders:")]),t._v("\n              "+t._s(e.total_orders)+"\n            ")])])]),t.tmp_id==e._id?s("div",{staticStyle:{background:"#ffef96"}},t._l(e.shifts,function(e,a){return s("div",{key:a,staticClass:"small text-left d-flex flex-column flex-wrap p-2 justify-content-between rounded border-bottom border-danger"},[s("div",{staticClass:"m-1"},[s("strong",[t._v("Date:")]),t._v("\n              "+t._s(e.shift_day)+"\n            ")]),s("div",{staticClass:"d-flex flex-wrap justify-content-between mb-2"},[s("div",{staticClass:"m-1"},[s("strong",[t._v("From:")]),t._v("\n                "+t._s(e.started_at)+"\n              ")]),s("div",{staticClass:"m-1"},[s("strong",[t._v("To:")]),t._v("\n                "+t._s(e.finished_at)+"\n              ")])]),s("div",{staticClass:"d-flex flex-wrap justify-content-between"},[s("div",{staticClass:"m-1"},[t._v("\n                Cost (£):\n                "+t._s(e.shift_cost)+"\n              ")]),s("div",{staticClass:"m-1"},[t._v("\n                Deliveries:\n                "+t._s(e.order_qty)+"\n              ")])]),s("div",{staticClass:"d-flex flex-wrap justify-content-between"},[s("div",{staticClass:"m-1"},[t._v("\n                Order Milage (km):\n                "+t._s(e.orders_milage)+"\n              ")]),s("div",{staticClass:"m-1"},[t._v("\n                Milage Traveled (km):\n                "+t._s(e.milage_traveled)+"\n              ")])])])}),0):t._e()])])})],2)])},J=[],V={name:"Drivers",data:function(){return{tmp_id:""}},beforeDestroy:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),methods:{},computed:{drivers:function(){var t=this,e=((this.$root.mainData||{}).drivers||[]).map(function(e){var s=((t.$root.mainData||{}).shifts||[]).filter(function(t){return t.driver==e._id}),a=[],r=0,n=0,i=0,o=0,c=0,d=0,u=new Date,p=!0,m=!1,v=void 0;try{for(var f,h=H()(s);!(p=(f=h.next()).done);p=!0){var w=f.value,_=Object(l["a"])({},w),g=((_.finished_at?new Date(_.finished_at):u)-new Date(_.started_at))/36e5;_.shift_cost=Math.bzround(g*((_.payment_group||{}).per_hour||0)+(_.orders.delivered||[]).length*((_.payment_group||{}).per_order||0)+.621371*_.orders_milage*((_.payment_group||{}).per_mile||0),2),_.order_qty=((_.orders||{}).delivered||[]).length,_.shift_hours=Math.bzround(g,2),_.shift_day=new Date(_.started_at).format("mm dd yyyy");var y=new Date(_.started_at);_.started_at=y.format("HH:MM");var b=_.finished_at?new Date(_.finished_at):null;if(b){var x=b.getDay()-y.getDay();_.finished_at=x?1==x?b.format("HH:MM")+" Next Day":b.format("HH:MM @ mm/dd"):b.format("HH:MM")}else _.finished_at="now";r+=g,n+=_.shift_cost,d+=_.order_qty,o+=_.orders_milage,c+=_.milage_traveled,_.orders_milage=Math.bzround(_.orders_milage,2),_.milage_traveled=Math.bzround(_.milage_traveled,2),a.push(_)}}catch(k){m=!0,v=k}finally{try{p||null==h.return||h.return()}finally{if(m)throw v}}return i=d?n/d:0,Object(l["a"])({},e,{shifts:a,name:e.username||" "+e.lastname||"",phone:e.phone.code+e.phone.number,total_cost:Math.bzround(n,2),total_orders:Math.bzround(d,2),cost_per_drop:Math.bzround(i,2)||0,total_hours:Math.bzround(r,2),orders_milage:Math.bzround(o,2),milage_traveled:Math.bzround(c,2)})}).sort(function(t,e){return t.total_hours>e.total_hours?-1:1});return console.log(e),e}}},W=V,K=Object(v["a"])(W,B,J,!1,null,null,null),Q=K.exports;n["a"].use(M["a"]);var G=new M["a"]({routes:[{path:"/",name:"MainList",component:N,meta:{mainindex:1,keepAlive:!0}},{path:"/drivers",name:"Drivers",component:Q,meta:{mainindex:2,keepAlive:!0}},{path:"/merchants",name:"Merchants",component:U,meta:{mainindex:3,keepAlive:!0}}]}),X=G;window.serverconfig=r;var Y=s("fe3c");Y.attach(document.body),s("8aa8"),n["a"].config.productionTip=!0,new n["a"]({router:X,data:{user:null},render:function(t){return t(O)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var a=s("5e27"),r=s.n(a);r.a},"5e27":function(t,e,s){},"87b8":function(t,e,s){},"8aa8":function(t,e,s){"use strict";s.r(e);var a,r=s("795b"),n=s.n(r),i=s("f499"),o=s.n(i),l=(s("34ef"),s("a481"),s("14b9"),s("cadf"),s("551c"),s("f751"),s("097d"),s("9483")),c="BJIGTwPsHQ_J1Yg_9xbUDLnrz_jTq8-nDxuU3_nXPF7-DNU645CLMBsrm73g6HefM74RSTjtLr2upgWKQ30SFLk",d=null;function u(t){for(var e="=".repeat((4-t.length%4)%4),s=(t+e).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(s),r=new Uint8Array(a.length),n=0;n<a.length;++n)r[n]=a.charCodeAt(n);return r}function p(t){window.localStorage.setItem("pushcre",o()(t)),window.location.reload(!0)}window.subscribeUser=function(){return new n.a(function(t){var e=u(c);d.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(e){p(e),t(e)}).catch(function(e){return console.log("Failed to subscribe the user: ",e),window.toastr.error("you should allow permission for push notification","Permission required!!!",{closeButton:!0,positionClass:"toast-top-full-width",timeOut:0,extendedTimeOut:0}),t(null)})})},window.propforinstall=null,Object(l["a"])("".concat("/zmovies/","service-worker.js"),{registered:function(t){d=t}}),(window.navigator||{}).serviceWorker&&window.navigator.serviceWorker.ready.then(function(){window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),a=t,window.propforinstall=function(){a.prompt(),a.userChoice.then(function(t){"accepted"===t.outcome&&window.subscribeUser(),a=null})}})})},9180:function(t,e,s){},ab4a:function(t,e,s){},adca:function(t,e,s){},e992:function(t,e,s){"use strict";var a=s("07de"),r=s.n(a);r.a}});